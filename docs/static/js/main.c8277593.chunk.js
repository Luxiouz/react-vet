(this["webpackJsonpproy-veterinaria"]=this["webpackJsonpproy-veterinaria"]||[]).push([[0],{49:function(e,t,a){},54:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(1),r=a(17),s=a.n(r),i=(a(47),a(48),a(49),a(7)),o=(a(54),a(5)),l=a(24),j=a(18),d=a(8),u=a(11),b=a.n(u),m=a(19),O=a(28);a(79),a(57);O.a.initializeApp({apiKey:"AIzaSyDHjWrLRDqu0cwkvzrVAFtDeEBK67Oapk0",authDomain:"vet-proy-react.firebaseapp.com",projectId:"vet-proy-react",storageBucket:"vet-proy-react.appspot.com",messagingSenderId:"1025721684296",appId:"1:1025721684296:web:3f03f26079d3671781637d"});var p=O.a.firestore(),h=function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.collection("citas").get();case 3:a=e.sent,console.log("resultado es:"),console.log(a),c=[],a.forEach((function(e){c.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),console.log("citas es:"),console.log(c),t({type:"OBTENER_CITAS",payload:c}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(m.a)(b.a.mark((function t(a){var c,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.collection("citas").doc(e).get();case 3:c=t.sent,n=Object(o.a)(Object(o.a)({},c.data()),{},{id:c.id}),a({type:"OBTENER_CITA",payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.citas})).cita;Object(n.useEffect)((function(){t(x(e.match.params.id))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{className:"my-3 text-center",children:Object(c.jsx)("strong",{children:"Detalle de Cita"})}),Object.keys(a).length>0?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Cliente: "})}),Object(c.jsx)("p",{className:"m-0",children:a.ownerName})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Mascota: "})}),Object(c.jsx)("p",{className:"m-0",children:a.petName})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Correo: "})}),Object(c.jsx)("p",{className:"m-0",children:a.email})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Servicio: "})}),Object(c.jsx)("p",{className:"m-0",children:a.service.label})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Fecha: "})}),Object(c.jsx)("p",{className:"m-0",children:a.date})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Hora: "})}),Object(c.jsx)("p",{className:"m-0",children:a.hour})]}),Object(c.jsxs)("div",{className:"d-flex justify-content-start align-items-end",children:[Object(c.jsx)("p",{className:"m-0 me-3",children:Object(c.jsx)("b",{children:"Observaciones: "})}),Object(c.jsx)("p",{className:"m-0",children:a.description?a.description:"ninguna"})]})]}):Object(c.jsx)("h3",{children:"Cargando..."}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){e.history.push("/citas")},children:"Regresar"})]})},v=a(23),g=a(41),N=function(e){var t=Object(n.useState)({ownerName:"",petName:"",email:"",date:"",hour:"",service:"",description:""}),a=Object(l.a)(t,2),r=a[0],s=a[1];Object(n.useEffect)((function(){s(Object(o.a)({},e.cita))}),[]),Object(n.useEffect)((function(){console.log("formState Change:"),console.log(r)}),[r]);var i=function(e){e.target&&s(Object(o.a)(Object(o.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log(r),e.submitCallback(r)},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"ownerName",children:"Cliente"}),Object(c.jsx)("input",{className:"form-control",type:"text",name:"ownerName",id:"ownerName",placeholder:"Jhon Doe",autoComplete:"off",value:r.ownerName,onChange:i,required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"petName",children:"Mascota"}),Object(c.jsx)("input",{className:"form-control",type:"text",name:"petName",id:"petName",placeholder:"Firulais",autoComplete:"off",value:r.petName,onChange:i,required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Correo"}),Object(c.jsx)("input",{type:"email",className:"form-control",placeholder:"jhon@doe.com",name:"email",id:"email","aria-describedby":"emailHelp",value:r.email,onChange:i,required:!0}),Object(c.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Nos comunicaremos con el cliente mediante este correo"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"service",children:"Servicio"}),Object(c.jsx)(g.a,{name:"service",id:"service",value:r.service,onChange:function(e){s(Object(o.a)(Object(o.a)({},r),{},{service:e}))},options:[{value:"opt1",label:"Consulta Veterinaria"},{value:"opt2",label:"Ba\xf1o Regular"},{value:"opt3",label:"Ba\xf1o Regular y Corte"},{value:"opt4",label:"Ba\xf1o Medicado"},{value:"opt5",label:"Ba\xf1o Medicado y Corte"}],required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"date",children:"Fecha"}),Object(c.jsx)("input",{className:"form-control",type:"date",name:"date",id:"date",placeholder:"2021/01/01",autoComplete:"off",value:r.date,onChange:i,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"hour",children:"Hora"}),Object(c.jsx)("input",{className:"form-control",type:"time",name:"hour",id:"hour",placeholder:"12:00",autoComplete:"off",value:r.hour,onChange:i,required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),Object(c.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:"3",value:r.description,onChange:i})]}),Object(c.jsx)("button",{type:"submit",className:"my-3 btn btn-primary",children:"register"===e.type?"Registrar":"Guardar"})]})})},y=function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.citas})),r=a.cita,s=a.editOk;Object(n.useEffect)((function(){t(x(e.match.params.id))}),[]),Object(n.useEffect)((function(){s&&e.history.push("/citas")}),[s]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{className:"my-3",children:"Agregar nueva cita"}),Object.keys(r).length>0&&Object(c.jsx)(N,{cita:r,submitCallback:function(e){console.log("dispatching editar cita"),t(function(e){return function(){var t=Object(m.a)(b.a.mark((function t(a){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,delete(c=Object(o.a)({},e)).id,t.next=5,p.collection("citas").doc(e.id).update(c);case 5:a({type:"EDITAR_CITA",payload:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))},type:"edit"})]})},C=a(39),k=a.n(C),A=function(e){var t=e.cita,a=Object(i.b)(),n=(Object(i.c)((function(e){return e.citas})).deleteOk,Object(d.g)());return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.ownerName}),Object(c.jsx)("td",{children:t.petName}),Object(c.jsx)("td",{children:t.service.label}),Object(c.jsx)("td",{children:t.date}),Object(c.jsx)("td",{children:t.hour}),Object(c.jsxs)("td",{className:"d-flex justify-content-end",children:[Object(c.jsx)("button",{className:"my-0 btn btn-success",onClick:function(e){e.preventDefault(),console.log("consultando..."),n.push("/cita/detalle/"+t.id)},children:"Ver detalle"}),Object(c.jsx)("button",{className:"my-0 mx-2 btn btn-warning",onClick:function(e){e.preventDefault(),console.log("editando..."),n.push("/cita/editar/"+t.id)},children:"Editar"}),Object(c.jsx)("button",{className:"my-0 btn btn-danger",onClick:function(e){e.preventDefault(),k.a.fire({title:"Se eliminar\xe1 la cita",showDenyButton:!1,showCancelButton:!0,confirmButtonText:"Eliminar",denyButtonText:"Cancelar",cancelButtonText:"Cancelar"}).then((function(e){var c;e.isConfirmed&&(console.log("eliminando..."),a((c=t.id,function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.collection("citas").doc(c).delete();case 3:t({type:"ELIMINAR_CITA",payload:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}())))}))},children:"Eliminar"})]})]},t.id)},w=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.citas})),a=t.listaCitas,r=t.deleteOk;return Object(n.useEffect)((function(){e(h())}),[]),Object(n.useEffect)((function(){r&&e(h())}),[r]),Object(c.jsx)("div",{children:Object(c.jsxs)("table",{className:"table table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"Cliente"}),Object(c.jsx)("th",{scope:"col",children:"Mascota"}),Object(c.jsx)("th",{scope:"col",children:"Servicio"}),Object(c.jsx)("th",{scope:"col",children:"Fecha"}),Object(c.jsx)("th",{scope:"col",children:"Hora"}),Object(c.jsx)("th",{scope:"col"})]})}),Object(c.jsx)("tbody",{children:a.map((function(e){return Object(c.jsx)(A,{cita:e},e.id)}))})]})})},I=function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.citas})).addOk;Object(n.useEffect)((function(){a&&e.history.push("/citas")}),[a]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{className:"my-3",children:"Agregar nueva cita"}),Object(c.jsx)(N,{submitCallback:function(e){console.log("dispatching nueva cita"),t(function(e){return function(){var t=Object(m.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.collection("citas").add(e);case 3:a({type:"AGREGAR_CITA",payload:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(e))},type:"register"})]})},E=a.p+"static/media/dog-png.962d14fc.png",T=function(){return{type:"UI_START_LOADING"}},S=function(){return{type:"UI_FINISH_LOADING"}},_=function(e,t){return{type:"LOGIN",payload:{uid:e,email:t}}},D=function(){return{type:"LOGOUT"}},F=(a(76),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e})).login,a=(t.uid,t.email,Object(n.useState)({email:"usuario@correo.com",password:"123456"})),r=Object(l.a)(a,2),s=r[0],j=r[1],d=function(e){j(Object(o.a)(Object(o.a)({},s),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"global-container mt-5",children:Object(c.jsx)("div",{className:"card login-form",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"text-center mb-3",children:Object(c.jsx)("img",{src:E,alt:"logo",className:"logo"})}),Object(c.jsx)("h3",{className:"card-title text-center",children:"Veterinaria Guau Guau"}),Object(c.jsx)("div",{className:"card-text",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log("Login data"),console.log(s),e(function(e,t){return function(){var a=Object(m.a)(b.a.mark((function a(c){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(T),a.prev=1,a.next=4,O.a.auth().signInWithEmailAndPassword(e,t);case 4:n=a.sent,r=n.user,console.log(r),c(_(r.uid,r.email)),c(S),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),c(S);case 15:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(s.email,s.password))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Usuario"}),Object(c.jsx)("input",{type:"email",className:"form-control form-control-sm",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp",value:s.email,onChange:d})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Contrase\xf1a"}),Object(c.jsx)("input",{type:"password",className:"form-control form-control-sm",id:"exampleInputPassword1",name:"password",value:s.password,onChange:d})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Ingresar"})]})})]})})})}),R=a(29),B=function(){var e={width:"60px",height:"60px",backgroundImage:"url(".concat(E,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},t=Object(i.b)();return Object(c.jsx)("header",{children:Object(c.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)(j.b,{className:"navbar-brand",to:"/citas",children:Object(c.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(c.jsx)("div",{className:"me-3",style:e}),Object(c.jsx)("strong",{children:"Veterinaria Guau Guau"})]})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsxs)("div",{className:"collapse navbar-collapse justify-content-between alig-items-center",id:"navbarNavAltMarkup",children:[Object(c.jsxs)("div",{className:"navbar-nav",children:[Object(c.jsx)(j.b,{className:"nav-link",to:"/citas",children:"Lista de Citas"}),Object(c.jsx)(j.b,{className:"nav-link",to:"/cita/nueva",children:"Nueva Cita"})]}),Object(c.jsx)("button",{className:"btn btn-warning my-0",onClick:function(e){e.preventDefault(),t(function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T),e.prev=1,e.next=4,O.a.auth().signOut();case 4:t(D),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())},children:"Cerrar Sesi\xf3n"})]})]})})})},G=function(e){var t=e.isAuth,a=e.component,n=Object(R.a)(e,["isAuth","component"]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(B,{}),Object(c.jsx)("main",{className:"container",children:Object(c.jsx)(d.b,Object(o.a)(Object(o.a)({},n),{},{component:function(e){return t?Object(c.jsx)(a,Object(o.a)({},e)):Object(c.jsx)(d.a,{to:"/"})}}))})]})},L=function(e){var t=e.isAuth,a=e.component,n=Object(R.a)(e,["isAuth","component"]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(d.b,Object(o.a)(Object(o.a)({},n),{},{component:function(e){return t?Object(c.jsx)(d.a,{to:"/citas"}):Object(c.jsx)(a,Object(o.a)({},e))}}))})},M=function(){var e=Object(n.useState)({isAuth:!1,loading:!0}),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(i.b)();return Object(n.useEffect)((function(){O.a.auth().onAuthStateChanged((function(e){var t=!1;(null===e||void 0===e?void 0:e.uid)?(console.log("logueado 1c!"),s(_(e.uid,e.email)),t=!0):(console.log("no logueado!"),t=!1),r((function(e){return console.log(e),Object(o.a)(Object(o.a)({},e),{},{isAuth:t,loading:!1})}))}))}),[]),a.loading?Object(c.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center my-5",children:[Object(c.jsx)("img",{src:E,style:{width:"150px"},alt:"logo",className:"logo"}),Object(c.jsx)("h2",{className:"text-center my-3",children:"Cargando...."}),Object(c.jsx)("div",{className:"progress",style:{width:"50%"},children:Object(c.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})})]}):Object(c.jsx)(j.a,{children:Object(c.jsxs)(d.d,{children:[Object(c.jsx)(L,{exact:!0,path:"/",component:F,isAuth:a.isAuth}),Object(c.jsx)(G,{exact:!0,path:"/citas",component:w,isAuth:a.isAuth}),Object(c.jsx)(G,{exact:!0,path:"/cita/nueva",component:I,isAuth:a.isAuth}),Object(c.jsx)(G,{exact:!0,path:"/cita/detalle/:id",component:f,isAuth:a.isAuth}),Object(c.jsx)(G,{exact:!0,path:"/cita/editar/:id",component:y,isAuth:a.isAuth}),Object(c.jsx)(L,{path:"",component:F,isAuth:a.isAuth})]})})},H=a(21),U=a(40),q={listaCitas:[],cita:{},addOk:!1,editOk:!1,deleteOk:!1},P="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,V=Object(H.c)({citas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(o.a)({},q),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OBTENER_CITAS":return Object(o.a)(Object(o.a)({},e),{},{listaCitas:t.payload,cita:{},addOk:!1,editOk:!1,deleteOk:!1});case"OBTENER_CITA":return Object(o.a)(Object(o.a)({},e),{},{cita:t.payload});case"AGREGAR_CITA":return Object(o.a)(Object(o.a)({},e),{},{addOk:t.payload});case"EDITAR_CITA":return Object(o.a)(Object(o.a)({},e),{},{editOk:t.payload});case"ELIMINAR_CITA":return Object(o.a)(Object(o.a)({},e),{},{deleteOk:t.payload});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UI_START_LOADING":return Object(o.a)(Object(o.a)({},e),{},{loading:!0});case"UI_FINISH_LOADING":return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case"LOGIN":return Object(o.a)(Object(o.a)({},e),{},{uid:t.payload.uid,email:t.payload.email});case"LOGOUT":return{};default:return e}}}),z=Object(H.e)(V,P(Object(H.a)(U.a)));var J=function(){return Object(c.jsx)(i.a,{store:z,children:Object(c.jsx)(M,{})})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,82)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(c.jsx)(J,{}),document.getElementById("root")),K()}},[[78,1,2]]]);
//# sourceMappingURL=main.c8277593.chunk.js.map